(function(){function d(){}d.prototype={bind:function(c){for(var a in c)b.addShortcut(a,c[a])},bindWithDelay:function(c){for(var a in c)b.addShortcut(a,this._handleDelayedShortcut(c[a]))},_handleDelayedShortcut:function(c){var a=null,e=null;return function(g){clearTimeout(a);clearTimeout(e);b.commandCanRun()&&null===a&&(a=setTimeout(c,150));e=setTimeout(function(){a=null},200)}}};var b={addShortcut:function(c,a){var b=new maxkir.KbdMatcher(c);maxkir.KbdMatcher.matchers.pop();b.resetUnmatched=function(a){b.has_sequence(a)|| b.reset()};return maxkir.kbd.forCondition(function(a){return b.matches(a)}).addHook(function(b){a(b)})},collapse:function(){return maxkir.ChecklistNodeToggle.collapse(this.getTaskId())},expand:function(){return maxkir.ChecklistNodeToggle.expand(this.getTaskId())},setFocus:function(){return maxkir.TaskFocus.set_focus(this.getTaskId())},removeFocus:function(){return maxkir.TaskFocus.remove_focus(this.getTaskId())},commandCanRun:function(){return maxkir.cmd.can_run(!0)},getTaskId:function(){return maxkir.Task.selected_task_id()}}, f=new d;f.bindWithDelay({h:function(){b.collapse()},l:function(){b.expand()},"shift+g":function(){maxkir.tree_nav.selectLastInTree()}});f.bind({"shift+h":function(){b.removeFocus()},"shift+l":function(){b.setFocus()},"alt+g alt+g":function(){maxkir.tree_nav.selectFirstInTree()}})})();
