(function(){function c(a){this.actions=a}function f(){}c.prototype={actions:{},hasAction:function(a){return!!this.getAction(a)},exec:function(a){return this.getAction(a)()},getAction:function(a){return this.actions[a]}};f.prototype={bind:function(a){document.body.addEventListener("keyup",function(b){d.isEditing()||(b=this.getLetter(b),a.hasAction(b)&&a.exec(b))}.bind(this),!1)},bindWithDelay:function(a){var b=null,c=null;document.body.addEventListener("keyup",function(f){clearTimeout(b);clearTimeout(c); if(!d.isEditing()){var e=this.getLetter(f);a.hasAction(e)&&null===b&&(b=setTimeout(function(){a.exec(e)},150))}c=setTimeout(function(){b=null},200)}.bind(this),!1)},getLetter:function(a){var b={72:function(){return a.shiftKey?"H":"h"},76:function(){return a.shiftKey?"L":"l"}}[a.which];return b&&b()}};var d={collapse:function(){return maxkir.ChecklistNodeToggle.collapse(this.getTaskId())},expand:function(){return maxkir.ChecklistNodeToggle.expand(this.getTaskId())},setFocus:function(){return maxkir.TaskFocus.set_focus(this.getTaskId())}, removeFocus:function(){return maxkir.TaskFocus.remove_focus(this.getTaskId())},isEditing:function(){return maxkir.EditTracker.is_editing()},getTaskId:function(){return maxkir.Task.selected_task_id()}},e=new f;e.bindWithDelay(new c({h:function(){d.collapse()},l:function(){d.expand()}}));e.bind(new c({H:function(){d.removeFocus()},L:function(){d.setFocus()}}))})();
